<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Lab 4 - Creating Multiple HTTP Applications per tenant using AS3</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Lab 4 - Creating Multiple HTTP Applications per tenant using AS3"/>
  <meta name="product" content="F5 Solutions for Containers"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2020-02-26 07:28:24"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 Solutions for Containers" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Lab 4 - Creating Multiple HTTP Applications per tenant using AS3 &#8212; F5 Solutions for Containers  documentation</title>
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5_agility_theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5-theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/CoveoFullSearch.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/21fb8a09c3.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lab 5 - How to work with multiple tenants using AS3" href="lab05.html" />
    <link rel="prev" title="Lab 3 - Adding a WAF policy to an application" href="lab03.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 Solutions for Containers  </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../class01/class01.html">Class 1: Programmability - Introduction to BIG-IP Rest Structure and Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class02/class02.html">Class 2: A&amp;O Toolchain 111: BIG-IP Deployments with Declarative Onboarding (DO)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class03.html">Class 3: Application Deployments with BIG-IP and Application Services (AS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class04/class04.html">Class 4: A&amp;O Tool Chain - BIG-IP Service Analytics and Metrics with Telemetry Streaming (TS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class05/class05.html">Class 5: A&amp;O Tool Chain - Advanced Design Patterns with AS3, DO and TS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class06/class06.html">Class 6: Programmability - CI/CD Process Integration with BIG-IP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class07/class07.html">Class 7: Dude Where's My Services: Introduction to Service Discovery with Consul</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class08/class08.html">Class 8: Containers - Kubernetes &amp; OpenShift Integration with BIG-IP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class09/class09.html">Class 9: Basic BIG-IP Configuration Management with Ansible</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class10/class10.html">Class 10: Advanced BIG-IP Configuration Management with Ansible</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class11/class11.html">Class 11: 101 of Terraform BIG-IP Provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class12/class12.html">Class 12: Cisco ACI Integration with BIG-IP</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Lab 4 - Creating Multiple HTTP Applications per tenant using AS3</a></li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../index.html">F5 Solutions for Containers</a>
              &gt; <a href="../class03.html">Class 3: Application Deployments with BIG-IP and Application Services (AS3)</a>

          <span class="right">
             <a href="../../_sources/class03/module1/lab04.rst.txt" rel="nofollow">Source</a> |
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="lab-4-creating-multiple-http-applications-per-tenant-using-as3">
<h1>Lab 4 - Creating Multiple HTTP Applications per tenant using AS3<a class="headerlink" href="#lab-4-creating-multiple-http-applications-per-tenant-using-as3" title="Permalink to this headline">Â¶</a></h1>
<p>In this lab, we will create two simple HTTP applications using AS3 within the
same tenant. Afterwards, we will modify the AS3 declaration to compose and
create our very own third application within the same tenant.</p>
<p><strong>Exercise 1 - Multi-App AS3 Declaration</strong></p>
<ol class="arabic">
<li><p class="first">Open Postman and locate the <code class="docutils literal notranslate"><span class="pre">Lab</span> <span class="pre">4</span></code> folder, and double-click the
<code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">Multi-Applications</span> <span class="pre">(2</span> <span class="pre">Apps)</span></code> declaration.</p>
</li>
<li><p class="first">Examine the body of the AS3 declaration. Take some time to familiarize
yourself with how we are declaring two HTTP applications within the same
tenant.  The two applications are: <code class="docutils literal notranslate"><span class="pre">http_vs</span></code> and <code class="docutils literal notranslate"><span class="pre">http_vs_2</span></code>.</p>
</li>
<li><p class="first">After examining the declaration, <code class="docutils literal notranslate"><span class="pre">Send</span></code> the declaration.</p>
</li>
<li><p class="first">Confirm the results of the POST, and make sure you receive a result of 200.</p>
</li>
<li><p class="first">Navigate to the BIG-IP and visually confirm the changes have been made.</p>
<img alt="../../_images/two_apps_confirm.jpg" src="../../_images/two_apps_confirm.jpg" />
</li>
</ol>
<p><strong>Exercise 2 - Add an Additional HTTP Application within a Multi-App
Single-Tenant AS3 Declaration</strong></p>
<ol class="arabic">
<li><p class="first">In Postman, locate the declaration we previously sent.</p>
</li>
<li><p class="first">We want to add another HTTP Application within the same tenant.</p>
</li>
<li><p class="first">In Postman, and most text-editors, you can move your cursor next to an open
(or closed) brace and it will locate the corresponding closed (or open)
brace. This is depicted in the following images:</p>
<img alt="../../_images/app_begin.jpg" src="../../_images/app_begin.jpg" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<img alt="../../_images/app_end.jpg" src="../../_images/app_end.jpg" />
</li>
<li><p class="first">We want to add another application to our <code class="docutils literal notranslate"><span class="pre">http_tenant</span></code>. We can copy the
existing declaration for an application and modify parts as needed.</p>
<img alt="../../_images/app_template.jpg" src="../../_images/app_template.jpg" />
</li>
<li><p class="first">We want to name the application <code class="docutils literal notranslate"><span class="pre">http_app_3</span></code> and configure the following:</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Virtual Server</td>
<td>Name: 'http_vs_3'
Address: 10.1.20.100</td>
</tr>
<tr class="row-even"><td>Pool</td>
<td>Name: 'http_pool_3'
Members: 10.1.10.34 and 10.1.10.35</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">Modify the AS3 declaration so that our <code class="docutils literal notranslate"><span class="pre">http_app_3</span></code> has the appropriate
information. Once modified, it should look like the following.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can confirm your updated declaration with the
<code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">Multi-Application</span> <span class="pre">(3</span> <span class="pre">Apps)</span></code> declaration.</p>
</div>
<img alt="../../_images/app_template_pt2.jpg" src="../../_images/app_template_pt2.jpg" />
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">Send</span></code> the declaration.</p>
</li>
<li><p class="first">Confirm the results of the POST, and make sure you receive a result of 200.</p>
<img alt="../../_images/200.jpg" src="../../_images/200.jpg" />
</li>
<li><p class="first">Confirm the changes on the BIG-IP. On the left column, navigate to
<strong>Local Traffic -&gt; Virtual Servers</strong> and validate the <strong>partition</strong> is
<code class="docutils literal notranslate"><span class="pre">http_tenant</span></code>.</p>
</li>
<li><p class="first">You should see the list of 3 virtual servers.</p>
<img alt="../../_images/3apps.jpg" src="../../_images/3apps.jpg" />
</li>
<li><p class="first">You can navigate to <strong>Local Traffic -&gt; Pools</strong> to confirm the changes made
to the <code class="docutils literal notranslate"><span class="pre">Pools</span></code>.</p>
<img alt="../../_images/3pools.jpg" src="../../_images/3pools.jpg" />
</li>
</ol>
<p><strong>Exercise 3 - Delete HTTP Applications and Tenant</strong></p>
<ol class="arabic">
<li><p class="first">In order to delete our virtual server, pools, and pool members, we can
simply send a POST with an empty tenant body. Since AS3 is declarative, it
will notice that we are sending a POST with an empty tenant body, and will
by default delete the existing virtual server, pool and pool members.</p>
<img alt="../../_images/clear_tenant.jpg" src="../../_images/clear_tenant.jpg" />
</li>
<li><p class="first">In Postman, find the <code class="docutils literal notranslate"><span class="pre">Delete</span> <span class="pre">Application</span></code> request. Examine the URI and
body declaration. Notice we are sending a POST to the same API endpoint, but
take a close look at the JSON body.</p>
</li>
<li><p class="first">The body declares a AS3 tenant called <code class="docutils literal notranslate"><span class="pre">http_tenant</span></code>, but the body
describing the state of the tenant is empty. By default, AS3 will remove the
virtual server, pool, and pool members. Since this would cause the entire
tenant to be empty, AS3 will also remove the tenant for us.</p>
</li>
<li><p class="first">Click on <code class="docutils literal notranslate"><span class="pre">Send</span></code>.</p>
</li>
<li><p class="first">Confirm the results of the POST, and make sure you receive a result of 200.</p>
</li>
<li><p class="first">Navigate back to the BIG-IP, refresh the page and confirm the changes that
the tenant has been deleted.</p>
<img alt="../../_images/delete_tenant.jpg" src="../../_images/delete_tenant.jpg" />
</li>
</ol>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="lab03.html" title="Lab 3 - Adding a WAF policy to an application" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="lab05.html" title="Lab 5 - How to work with multiple tenants using AS3" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/clouddocs.js"></script>
  <script src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>